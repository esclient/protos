syntax = "proto3";

package mod;

import "google/protobuf/empty.proto";
import "google/protobuf/timestamp.proto";

service ModService {
  rpc CreateMod(CreateModRequest) returns (CreateModResponse);
  rpc SetStatus(SetStatusRequest) returns (SetStatusResponse);
  rpc GetModDownloadLink(GetModDownloadLinkRequest) returns (GetModDownloadLinkResponse);
  rpc GetMods (google.protobuf.Empty) returns (GetModsResponse);
}

message GetModsResponse {
  repeated Mod mods = 1;
}



message Mod{
  int64 id = 1;
  int64 author_id = 2;
  string title = 3;
  string description = 4;
  int64 version = 5;
  ModStatus status = 6;
  google.protobuf.Timestamp created_at = 7;
}

enum ModStatus {
  MOD_STATUS_UNSPECIFIED = 0;
  MOD_STATUS_UPLOADED = 1;
  MOD_STATUS_BANNED = 2;
  MOD_STATUS_HIDDEN = 3;
}

message SetStatusRequest {
  int64 mod_id = 1;
  ModStatus status = 2;
}

message SetStatusResponse {
  bool success = 1;
}

message CreateModRequest {
  string title = 1;
  int64 author_id = 2;
  string filename = 3;
  string description = 4;
}

message CreateModResponse {
  int64 mod_id = 1;
  string upload_url = 2;
  string s3_key = 3;
}

message GetModDownloadLinkRequest {
  int64 mod_id = 1;
}

message GetModDownloadLinkResponse {
  string link_url = 1;
}
